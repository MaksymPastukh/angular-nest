<div class="container mx-auto px-4 py-8">
  @if (facade.isLoading()) {
    <div class="flex items-center justify-center min-h-[400px]">
      <div class="text-center">
        <div
          class="animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"
        ></div>
        <p class="text-gray-600">Loading product...</p>
      </div>
    </div>
  } @else if (facade.error()) {
    <div class="flex items-center justify-center min-h-[400px]">
      <div class="text-center">
        <svg
          class="w-16 h-16 text-red-500 mx-auto mb-4"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
          />
        </svg>
        <h2 class="text-2xl font-bold text-gray-800 mb-2">Error</h2>
        <p class="text-gray-600">{{ facade.error() }}</p>
        <a
          routerLink="/products"
          class="mt-4 inline-block px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors"
        >
          Back to Products
        </a>
      </div>
    </div>
  } @else if (facade.product(); as prod) {
    <div class="container mx-auto px-4 py-10">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
        <div class="flex flex-col sm:flex-row gap-4">
          <div class="flex-1 order-1 sm:order-2">
            @if (facade.activeImage(); as img) {
              <img
                class="w-lg h-auto rounded-3xl object-cover max-h-full border border-gray-100"
                [src]="img.image | imageUrl"
                [alt]="img.alt"
                (error)="onImageError($event)"
              />
            }
          </div>

          <div class="flex sm:flex-col gap-3 order-2 sm:order-1">
            <div class="flex sm:flex-col gap-3 overflow-x-auto sm:overflow-visible">
              @for (img of facade.galleryImages(); track $index) {
                <img
                  class="w-20 h-24 sm:w-20 sm:h-24 flex-shrink-0 object-cover rounded-lg border-2 cursor-pointer transition-all duration-200"
                  [class.border-gray-200]="facade.activeImageIndex() !== $index"
                  [class.opacity-60]="facade.activeImageIndex() !== $index"
                  [class.hover:opacity-100]="facade.activeImageIndex() !== $index"
                  [class.hover:border-purple-400]="facade.activeImageIndex() !== $index"
                  [class.border-purple-600]="facade.activeImageIndex() === $index"
                  (click)="facade.selectImage($index)"
                  [src]="img.image | imageUrl"
                  [alt]="img.alt"
                />
              }
            </div>

            <div class="flex flex-col gap-2 mt-2 items-center">
              <button
                type="button"
                class="flex items-center justify-center w-10 h-10 rounded-full border-2 border-gray-300 bg-white hover:border-purple-600 hover:bg-purple-50 active:scale-95 transition-all duration-200"
                (click)="facade.prevImage()"
                aria-label="Previous image"
              >
                <svg
                  class="w-5 h-5 text-gray-600"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M5 15l7-7 7 7"
                  />
                </svg>
              </button>

              <button
                type="button"
                class="flex items-center justify-center w-10 h-10 rounded-full border-2 border-gray-300 bg-white hover:border-purple-600 hover:bg-purple-50 active:scale-95 transition-all duration-200"
                (click)="facade.nextImage()"
                aria-label="Next image"
              >
                <svg
                  class="w-5 h-5 text-gray-600"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 9l-7 7-7-7"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>

        <div class="space-y-6">
          <app-ui-breadcrumb [items]="breadcrumbItems()" />

          <h1 class="text-4xl font-coresans font-bold text-gray-900 mt-8">
            {{ prod.title }}
          </h1>

          <div class="flex text-sm">
            <div class="flex items-end">
              <app-ui-rating [value]="prod.rating" [readonly]="true" [stars]="5" />

              <span class="text-gray-500 font-family pl-3 font-medium text-xl">
                {{ prod.rating }}.0</span
              >
            </div>
            <button
              type="button"
              (click)="scrollToComments()"
              class="flex items-center ml-4 flex items-center ml-4 cursor-pointer hover:opacity-80 transition-opacity"
            >
              <svg
                width="22"
                height="20"
                viewBox="0 0 22 20"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M6.75 5C6.33579 5 6 5.33579 6 5.75C6 6.16421 6.33579 6.5 6.75 6.5V5ZM14.75 6.5C15.1642 6.5 15.5 6.16421 15.5 5.75C15.5 5.33579 15.1642 5 14.75 5V6.5ZM6.75 9C6.33579 9 6 9.33579 6 9.75C6 10.1642 6.33579 10.5 6.75 10.5V9ZM10.75 10.5C11.1642 10.5 11.5 10.1642 11.5 9.75C11.5 9.33579 11.1642 9 10.75 9V10.5ZM20.532 13.658L21.2003 13.9985V13.9985L20.532 13.658ZM19.658 14.532L19.9985 15.2003V15.2003L19.658 14.532ZM19.658 0.967987L19.9985 0.299732L19.9985 0.299732L19.658 0.967987ZM20.532 1.84202L21.2003 1.50153V1.50152L20.532 1.84202ZM1.84202 0.967987L2.18251 1.63624L2.18251 1.63624L1.84202 0.967987ZM0.967987 1.84202L1.63624 2.18251L1.63624 2.18251L0.967987 1.84202ZM1.95734 18.1361L2.39003 18.7487L2.39011 18.7486L1.95734 18.1361ZM5.91989 15.3365L5.48712 14.7239H5.48712L5.91989 15.3365ZM0.840271 18.2276L1.45486 17.7977H1.45486L0.840271 18.2276ZM1.85335 18.1983L1.5183 17.5273L1.51829 17.5273L1.85335 18.1983ZM1.17692 18.4356L1.0673 19.1776H1.0673L1.17692 18.4356ZM1.91983 18.162L1.51547 17.5303L1.51536 17.5304L1.91983 18.162ZM1.89376 18.1776L1.5285 17.5225L1.52845 17.5225L1.89376 18.1776ZM7.01828 14.784L7.15589 15.5212L7.15589 15.5212L7.01828 14.784ZM6.55048 14.9325L6.86351 15.6141L6.86352 15.6141L6.55048 14.9325ZM6.75 6.5H14.75V5H6.75V6.5ZM6.75 10.5H10.75V9H6.75V10.5ZM3.95 1.5H17.55V0H3.95V1.5ZM20 3.95V11.55H21.5V3.95H20ZM20 11.55C20 12.1224 19.9994 12.5066 19.9752 12.8025C19.9518 13.0896 19.9099 13.2269 19.8638 13.3175L21.2003 13.9985C21.3721 13.6612 21.4392 13.3046 21.4703 12.9247C21.5006 12.5535 21.5 12.0977 21.5 11.55H20ZM17.55 15.5C18.0977 15.5 18.5535 15.5006 18.9247 15.4703C19.3046 15.4392 19.6612 15.3721 19.9985 15.2003L19.3175 13.8638C19.2269 13.9099 19.0896 13.9518 18.8025 13.9752C18.5066 13.9994 18.1224 14 17.55 14V15.5ZM19.8638 13.3175C19.7439 13.5527 19.5527 13.7439 19.3175 13.8638L19.9985 15.2003C20.5159 14.9366 20.9366 14.5159 21.2003 13.9985L19.8638 13.3175ZM17.55 1.5C18.1224 1.5 18.5066 1.50058 18.8025 1.52476C19.0896 1.54822 19.2269 1.5901 19.3175 1.63624L19.9985 0.299732C19.6612 0.127888 19.3046 0.0607771 18.9247 0.0297393C18.5535 -0.000583231 18.0977 0 17.55 0V1.5ZM21.5 3.95C21.5 3.40232 21.5006 2.94646 21.4703 2.57533C21.4392 2.19545 21.3721 1.83879 21.2003 1.50153L19.8638 2.18251C19.9099 2.27307 19.9518 2.41035 19.9752 2.69748C19.9994 2.99336 20 3.37757 20 3.95H21.5ZM19.3175 1.63624C19.5527 1.75608 19.7439 1.94731 19.8638 2.18251L21.2003 1.50152C20.9366 0.984081 20.5159 0.563385 19.9985 0.299732L19.3175 1.63624ZM3.95 0C3.40232 0 2.94646 -0.000583231 2.57533 0.0297393C2.19544 0.0607771 1.83879 0.127888 1.50153 0.299732L2.18251 1.63624C2.27307 1.5901 2.41035 1.54822 2.69748 1.52476C2.99336 1.50058 3.37757 1.5 3.95 1.5V0ZM1.5 3.95C1.5 3.37757 1.50058 2.99336 1.52476 2.69748C1.54822 2.41035 1.5901 2.27307 1.63624 2.18251L0.299732 1.50153C0.127888 1.83879 0.0607771 2.19545 0.0297393 2.57533C-0.000583231 2.94646 0 3.40232 0 3.95H1.5ZM1.50153 0.299732C0.98408 0.563384 0.563384 0.98408 0.299732 1.50153L1.63624 2.18251C1.75608 1.94731 1.94731 1.75608 2.18251 1.63624L1.50153 0.299732ZM17.55 14H7.76639V15.5H17.55V14ZM2.39011 18.7486L6.35267 15.949L5.48712 14.7239L1.52457 17.5236L2.39011 18.7486ZM0 17.4556C0 17.6552 -0.000747502 17.8567 0.0144057 18.0223C0.0294603 18.1867 0.0673863 18.4311 0.22568 18.6574L1.45486 17.7977C1.52289 17.895 1.51568 17.9676 1.50816 17.8855C1.50499 17.8509 1.50258 17.801 1.5013 17.726C1.50002 17.6514 1.5 17.5646 1.5 17.4556H0ZM1.51829 17.5273C1.43118 17.5708 1.36175 17.6052 1.3023 17.6332C1.24244 17.6614 1.2029 17.6783 1.17597 17.6884C1.11294 17.7122 1.17374 17.677 1.28654 17.6937L1.0673 19.1776C1.32835 19.2161 1.55366 19.1491 1.70491 19.0921C1.8554 19.0354 2.02432 18.9513 2.18841 18.8693L1.51829 17.5273ZM0.225679 18.6574C0.422743 18.9392 0.727163 19.1273 1.0673 19.1776L1.28654 17.6937C1.35457 17.7037 1.41545 17.7413 1.45486 17.7977L0.225679 18.6574ZM1.5 17.4556V3.95H0V17.4556H1.5ZM1.52465 17.5235C1.51983 17.5269 1.51637 17.5293 1.51338 17.5314C1.51043 17.5335 1.50887 17.5346 1.50804 17.5352C1.50672 17.5361 1.51002 17.5338 1.51547 17.5303L2.3242 18.7936C2.35147 18.7762 2.37688 18.758 2.39003 18.7487L1.52465 17.5235ZM2.1884 18.8693C2.20307 18.862 2.2308 18.8483 2.25907 18.8326L1.52845 17.5225C1.53396 17.5195 1.53751 17.5177 1.53623 17.5183C1.53538 17.5188 1.53372 17.5196 1.53053 17.5212C1.52732 17.5228 1.52354 17.5247 1.5183 17.5273L2.1884 18.8693ZM1.51536 17.5304C1.51971 17.5276 1.52403 17.525 1.5285 17.5225L2.25902 18.8326C2.28112 18.8203 2.30295 18.8072 2.3243 18.7935L1.51536 17.5304ZM7.76639 14C7.41604 14 7.1465 13.9971 6.88067 14.0467L7.15589 15.5212C7.25388 15.5029 7.3618 15.5 7.76639 15.5V14ZM6.35266 15.949C6.6831 15.7156 6.77294 15.6557 6.86351 15.6141L6.23745 14.251C5.9917 14.3639 5.77325 14.5218 5.48712 14.7239L6.35266 15.949ZM6.88067 14.0467C6.65869 14.0881 6.44265 14.1567 6.23745 14.251L6.86352 15.6141C6.95679 15.5712 7.05499 15.5401 7.15589 15.5212L6.88067 14.0467Z"
                  fill="#807D7E"
                />
              </svg>
              <div class="ml-2 text-lg font-family color-text-gray">
                {{ tabss()[1].content }} comment
              </div>
            </button>
          </div>

          <div>
            <div class="flex items-center">
              <div
                class="flex items-center gap-4 mb-2 text-lg font-family font-medium color-text-gray"
              >
                <span>Select Size</span>
                <a
                  routerLink="size-guide"
                  class="inline-flex items-center gap-1 font-medium text-gray-600 hover:text-gray-900 transition-colors group"
                >
                  <span>Size Guide</span>
                  <svg
                    class="w-4 h-4 transition-transform group-hover:translate-x-0.5"
                    viewBox="0 0 16 14"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M0.9 6.9H13.9M8.9 0.9L14.1929 6.19289C14.5834 6.58342 14.5834 7.21658 14.1929 7.60711L8.9 12.9"
                      stroke="currentColor"
                      stroke-width="1.8"
                      stroke-linecap="round"
                    />
                  </svg>
                </a>
              </div>
            </div>
            <div class="flex gap-2 flex-wrap">
              @for (size of prod.sizes; track $index) {
                <button
                  type="button"
                  (click)="facade.selectSize(size)"
                  class="px-4 py-2 rounded-lg cursor-pointer border text-sm font-medium transition-all duration-200"
                  [class.border-purple-600]="facade.selectedSize() === size"
                  [class.bg-purple-600]="facade.selectedSize() === size"
                  [class.text-white]="facade.selectedSize() === size"
                  [class.border-gray-300]="facade.selectedSize() !== size"
                  [class.text-gray-900]="facade.selectedSize() !== size"
                  [class.hover:border-purple-400]="facade.selectedSize() !== size"
                  [class.hover:bg-purple-50]="facade.selectedSize() !== size"
                >
                  {{ size }}
                </button>
              }
            </div>
          </div>

          <div>
            <p class="font-causten font-bold text-lg mb-2">Colour Available</p>
            <div class="flex gap-3 mt-3">
              @for (color of facade.availableColors(); track $index) {
                <button
                  type="button"
                  (click)="facade.selectColor(color)"
                  class="w-8 h-8 rounded-full transition-all duration-200 cursor-pointer border-2 border-gray-100 focus:outline-none"
                  [class.ring-2]="facade.selectedColor() === color"
                  [class.ring-purple-500]="facade.selectedColor() === color"
                  [style.background-color]="color"
                  [title]="color"
                  aria-label="Select color"
                ></button>
              }
            </div>
          </div>

          <div class="flex flex-wrap gap-8 mt-8">
            <button
              type="button"
              (click)="facade.addToCart()"
              [disabled]="!facade.canAddToCart()"
              class="flex w-3xs items-center font-causten font-bold text-lg cursor-pointer gap-2 px-8 py-3 rounded-lg font-medium transition-all duration-200"
              [class.bg-purple-600]="facade.canAddToCart()"
              [class.text-white]="facade.canAddToCart()"
              [class.hover:bg-purple-700]="facade.canAddToCart()"
              [class.bg-gray-300]="!facade.canAddToCart()"
              [class.text-gray-500]="!facade.canAddToCart()"
              [class.cursor-not-allowed]="!facade.canAddToCart()"
            >
              <svg
                width="17"
                height="15"
                viewBox="0 0 17 15"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M0.75 0.75H1.25526C2.10578 0.75 2.81986 1.39042 2.9121 2.23592L3.5879 8.43074C3.68014 9.27625 4.39422 9.91667 5.24474 9.91667H12.455C13.2169 9.91667 13.8817 9.40007 14.07 8.66185L15.2199 4.15259C15.4887 3.09878 14.6925 2.07407 13.605 2.07407H3.75M3.77063 12.9374H4.39563M3.77063 13.5624H4.39563M12.9373 12.9374H13.5623M12.9373 13.5624H13.5623M4.91667 13.25C4.91667 13.7102 4.54357 14.0833 4.08333 14.0833C3.6231 14.0833 3.25 13.7102 3.25 13.25C3.25 12.7898 3.6231 12.4167 4.08333 12.4167C4.54357 12.4167 4.91667 12.7898 4.91667 13.25ZM14.0833 13.25C14.0833 13.7102 13.7102 14.0833 13.25 14.0833C12.7898 14.0833 12.4167 13.7102 12.4167 13.25C12.4167 12.7898 12.7898 12.4167 13.25 12.4167C13.7102 12.4167 14.0833 12.7898 14.0833 13.25Z"
                  stroke="currentColor"
                  stroke-width="1.5"
                  stroke-linecap="round"
                />
              </svg>
              @if (!facade.selectedSize() && !facade.selectedColor()) {
                <span>Select size & color</span>
              } @else if (!facade.selectedSize()) {
                <span>Select size</span>
              } @else if (!facade.selectedColor()) {
                <span>Select color</span>
              } @else {
                <span>Add to cart</span>
              }
            </button>
            <button
              type="button"
              class="px-12 py-3 font-causten font-bold text-lg rounded-lg border border-gray-300 text-gray-900 hover:border-purple-600 transition-colors"
            >
              ${{ prod.price }}
            </button>
          </div>

          <div
            class="grid grid-cols-2 gap-4 text-sm pt-6 border-t border-gray-400 font-causten font-medium text-lg"
          >
            <div class="flex gap-2 items-center text-gray-600">
              <svg
                width="44"
                height="44"
                viewBox="0 0 44 44"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle cx="22" cy="22" r="22" fill="#F6F6F6" />
                <path
                  d="M15 18.75H30M18 26.25H21M24 26.25H27M17.4 30H27.6C28.4401 30 28.8601 30 29.181 29.7956C29.4632 29.6159 29.6927 29.329 29.8365 28.9762C30 28.5751 30 28.0501 30 27V18C30 16.9499 30 16.4249 29.8365 16.0238C29.6927 15.671 29.4632 15.3841 29.181 15.2044C28.8601 15 28.4401 15 27.6 15H17.4C16.5599 15 16.1399 15 15.819 15.2044C15.5368 15.3841 15.3073 15.671 15.1635 16.0238C15 16.4249 15 16.9499 15 18V27C15 28.0501 15 28.5751 15.1635 28.9762C15.3073 29.329 15.5368 29.6159 15.819 29.7956C16.1399 30 16.5599 30 17.4 30Z"
                  stroke="#3C4242"
                  stroke-width="1.1"
                  stroke-linecap="round"
                />
              </svg>
              Secure payment
            </div>
            <div class="flex gap-2 items-center text-gray-600">
              <svg
                width="44"
                height="44"
                viewBox="0 0 44 44"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle cx="22" cy="22" r="22" fill="#F6F6F6" />
                <path
                  d="M25.6349 30H18.3651C17.3613 30 16.5476 29.2007 16.5476 28.2147V21.5796C16.5476 21.0634 15.9122 20.8049 15.5406 21.1699C15.2014 21.5032 14.6205 21.3203 14.5417 20.8555L14.0248 17.8091C13.9021 17.0857 14.2422 16.3621 14.8825 15.9847L18.1965 14.0315C18.293 13.9746 18.4175 13.9966 18.4878 14.0829C20.2884 16.2938 23.7116 16.2938 25.5122 14.0829C25.5825 13.9966 25.707 13.9746 25.8035 14.0315L29.1175 15.9847C29.7578 16.3621 30.0979 17.0857 29.9752 17.8091L29.4583 20.8555C29.3795 21.3203 28.7986 21.5032 28.4594 21.1699C28.0878 20.8049 27.4524 21.0634 27.4524 21.5796V28.2147C27.4524 29.2007 26.6387 30 25.6349 30Z"
                  stroke="#3C4242"
                  stroke-width="1.1"
                />
              </svg>
              Size & Fit
            </div>
            <div class="flex gap-2 items-center text-gray-600">
              <svg
                width="44"
                height="44"
                viewBox="0 0 44 44"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle cx="22" cy="22" r="22" fill="#F6F6F6" />
                <path
                  d="M23.8 26.6667V15.4667C23.8 15.2089 23.5985 15 23.35 15H13.45C13.2015 15 13 15.2089 13 15.4667V26.6667C13 26.9244 13.2015 27.1333 13.45 27.1333H14.8M23.8 26.6667C23.8 26.9244 23.5985 27.1333 23.35 27.1333H18.4M23.8 26.6667V18.2667C23.8 18.0089 24.0015 17.8 24.25 17.8H27.2136C27.333 17.8 27.4474 17.8492 27.5318 17.9367L30.8682 21.3967C30.9526 21.4842 31 21.6029 31 21.7266V26.6667C31 26.9244 30.7985 27.1333 30.55 27.1333H29.2M23.8 26.6667C23.8 26.9244 24.0015 27.1333 24.25 27.1333H25.6M14.8 27.1333C14.8 28.1643 15.6059 29 16.6 29C17.5941 29 18.4 28.1643 18.4 27.1333M14.8 27.1333C14.8 26.1024 15.6059 25.2667 16.6 25.2667C17.5941 25.2667 18.4 26.1024 18.4 27.1333M25.6 27.1333C25.6 28.1643 26.4059 29 27.4 29C28.3941 29 29.2 28.1643 29.2 27.1333M25.6 27.1333C25.6 26.1024 26.4059 25.2667 27.4 25.2667C28.3941 25.2667 29.2 26.1024 29.2 27.1333"
                  stroke="#3C4242"
                  stroke-width="1.1"
                />
              </svg>
              Free shipping
            </div>
            <div class="flex gap-2 items-center text-gray-600">
              <svg
                width="44"
                height="44"
                viewBox="0 0 44 44"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <circle cx="22" cy="22" r="22" fill="#F6F6F6" />
                <path
                  d="M18.4444 28.2222C18.4444 29.2041 17.6485 30 16.6667 30C15.6848 30 14.8889 29.2041 14.8889 28.2222C14.8889 27.2404 15.6848 26.4444 16.6667 26.4444C17.6485 26.4444 18.4444 27.2404 18.4444 28.2222ZM18.4444 28.2222H25.5556C26.5374 28.2222 27.3333 27.4263 27.3333 26.4444V22.8889M25.5556 15.7778C25.5556 16.7596 26.3515 17.5556 27.3333 17.5556C28.3152 17.5556 29.1111 16.7596 29.1111 15.7778C29.1111 14.7959 28.3152 14 27.3333 14C26.3515 14 25.5556 14.7959 25.5556 15.7778ZM25.5556 15.7778H18.4444C17.4626 15.7778 16.6667 16.5737 16.6667 17.5556V21.1111M30 24.6667L27.6476 22.1398C27.474 21.9534 27.1926 21.9534 27.0191 22.1398L24.6667 24.6667M19.3333 19.3333L16.9809 21.8602C16.8074 22.0466 16.526 22.0466 16.3524 21.8602L14 19.3333"
                  stroke="#3C4242"
                  stroke-width="1.1"
                  stroke-linecap="round"
                />
              </svg>
              Free Returns
            </div>
          </div>
        </div>
      </div>

      <div class="flex w-full">
        <div class="mt-16 flex-1">
          <div class="lg:col-span-2">
            <p-tabs [value]="activeTabIndex()" (valueChange)="onTabChange($event)">
              <p-tablist>
                @for (tab of tabss(); track tab.value) {
                  <p-tab [value]="tab.value">
                    @switch (tab.value) {
                      @case (0) {
                        <span class="font-causten font-medium text-lg">{{ tab.title }}</span>
                      }
                      @case (1) {
                        <span class="font-causten font-medium text-lg">{{ tab.title }}</span>
                        <span
                          class="ml-1 px-2 py-0.5 text-xs rounded-md bg-purple-600 text-white"
                          >{{ tab.content }}</span
                        >
                      }
                      @case (2) {
                        <span class="font-causten font-medium text-lg">{{ tab.title }}</span>
                        <span
                          class="ml-1 px-2 py-0.5 text-xs rounded-md bg-purple-600 text-white"
                          >{{ tab.content }}</span
                        >
                      }
                    }
                  </p-tab>
                }
              </p-tablist>
              <p-tabpanels>
                <p-tabpanel [value]="0">
                  <div class="py-6">
                    <div class="mt-4">
                      <p class="text-gray-700 font-causten font-normal leading-relaxed">
                        {{ tabss()[0].content }}
                      </p>
                    </div>
                    <div
                      class="mt-8 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 bg-gray-50 rounded-2xl overflow-hidden [&>div]:p-4 [&>div]:border-gray-200 [&>div>p:first-child]:text-xs [&>div>p:first-child]:text-gray-500 [&>div>p:first-child]:mb-1 [&>div>p:last-child]:font-medium [&>div>p:last-child]:text-gray-900"
                    >
                      <div class="border-b sm:border-r">
                        <p>fabric</p>
                        <p>{{ prod.fabric }}</p>
                      </div>

                      <div class="border-b lg:border-r">
                        <p>pattern</p>
                        <p>{{ prod.pattern }}</p>
                      </div>

                      <div class="border-b">
                        <p>fit</p>
                        <p>{{ prod.fit }}</p>
                      </div>

                      <div class="sm:border-r">
                        <p>neck</p>
                        <p>{{ prod.neck }}</p>
                      </div>

                      <div class="lg:border-r">
                        <p>sleeve</p>
                        <p>{{ prod.sleeve }}</p>
                      </div>

                      <div>
                        <p>style</p>
                        <p>{{ prod.brand }}</p>
                      </div>
                    </div>
                  </div>
                </p-tabpanel>
                <p-tabpanel [value]="1">
                  <div #commentsSection class="py-6">
                    @if (facade.product(); as prod) {
                      <app-ui-reviews [productId]="prod.id" [initialSummary]="prod.ratingStats" />
                    }
                  </div>
                </p-tabpanel>
                <p-tabpanel [value]="2">
                  <div class="py-6">text</div>
                </p-tabpanel>
              </p-tabpanels>
            </p-tabs>
          </div>
        </div>
        <div class="mt-16 flex-1">
          <div class="flex-1 mt-16 flex justify-center">
            <div
              class="relative w-full max-w-md aspect-video rounded-2xl overflow-hidden bg-gray-300"
            >
              @if (facade.activeImage(); as img) {
                <img
                  [src]="img.image | imageUrl"
                  [alt]="img.alt"
                  (error)="onImageError($event)"
                  class="w-full object-cover"
                />
              }

              <div class="absolute inset-0 bg-black/20"></div>
              <button
                class="absolute inset-0 flex items-center justify-center"
                aria-label="Play video"
              >
                <div
                  class="w-14 h-14 cursor-pointer rounded-full bg-white/90 flex items-center justify-center shadow-lg"
                >
                  <svg
                    width="53"
                    height="53"
                    viewBox="0 0 53 53"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <circle cx="26.5" cy="26.5" r="26.5" fill="#F6F6F6" />
                    <path
                      d="M34.0846 22.1699C37.4179 24.0944 37.4179 28.9056 34.0846 30.8301L26.4577 35.2336C23.1243 37.1581 18.9577 34.7524 18.9577 30.9034L18.9577 22.0966C18.9577 18.2476 23.1243 15.842 26.4577 17.7665L34.0846 22.1699Z"
                      fill="#3C4242"
                    />
                  </svg>
                </div>
              </button>
              <span
                class="absolute top-4 right-4 text-xs text-white bg-black/50 px-2 py-1 rounded-md"
              >
                1.00 M
              </span>
              <div class="absolute bottom-4 left-4 right-4">
                <p class="text-white text-sm font-medium">{{ prod.title }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  }
</div>
